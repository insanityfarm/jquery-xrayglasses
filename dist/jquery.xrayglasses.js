!function(a,s){var e=function(a,e){xrayglasses=this,xrayglasses.elem=a,xrayglasses.$elem=s(a),xrayglasses.options=e};e.prototype={defaults:{overlayOpacity:.8,width:150,height:150,toggleKeyCode:88},init:function(){return xrayglasses.config=s.extend({},xrayglasses.defaults,xrayglasses.options),xrayglasses.data={page:s(document),viewport:s(a),pageWrapper:xrayglasses.$elem},xrayglasses.attach(),xrayglasses.data.viewport.on("scroll",xrayglasses.updateFixedPositions).on("resize",xrayglasses.update).on("mousemove",xrayglasses.move).on("keyup keydown",xrayglasses.keypress),xrayglasses.data.overlay.css({fill:"rgba(0,0,0,"+xrayglasses.config.overlayOpacity+")"}),xrayglasses},attach:function(){var a=s('<svg id="xrayglasses" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><filter id="filter"><feGaussianBlur stdDeviation="10"></feGaussianBlur></filter><mask id="mask" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse"><ellipse cx="50%" cy="50%" rx="120px" ry="120px" fill="white" filter="url(#filter)" /></mask></defs><rect id="xrayglassesOverlay" width="100%" height="100%" /><foreignObject width="100%" height="100%" style="mask: url(#mask);"><div class="wrapper"></div></foreignObject></svg>');xrayglasses.data.pageWrapper.after(a),xrayglasses.data.xrayglasses=s("#xrayglasses"),xrayglasses.data.overlay=s("#xrayglassesOverlay"),xrayglasses.data.embeddedMaskEllipse=s("#mask ellipse"),xrayglasses.data.xrayglassesContent=s("#xrayglasses .wrapper"),xrayglasses.update()},update:function(){xrayglasses.data.xrayglassesContent.html(xrayglasses.data.pageWrapper.html()),xrayglasses.data.pageWidth=xrayglasses.data.viewport.width(),xrayglasses.data.pageHeight=xrayglasses.data.page.height()>xrayglasses.data.viewport.height()?xrayglasses.data.page.height():xrayglasses.data.viewport.height(),xrayglasses.data.xrayglasses.attr({width:xrayglasses.data.pageWidth,height:xrayglasses.data.pageHeight}),xrayglasses.data.overlay.attr({width:xrayglasses.data.pageWidth,height:xrayglasses.data.pageHeight}),xrayglasses.data.xrayglassesContent.css({width:xrayglasses.data.pageWidth,height:xrayglasses.data.pageHeight}),xrayglasses.updateFixedPositions()},move:function(a){xrayglasses.data.xrayglassesContent.css({"-webkit-mask-position-x":a.pageX-150,"-webkit-mask-position-y":a.pageY-150}),xrayglasses.data.embeddedMaskEllipse.attr({cx:a.pageX,cy:a.pageY})},updateFixedPositions:function(){var a=xrayglasses.data.viewport.scrollTop(),e=xrayglasses.data.viewport.scrollLeft();xrayglasses.data.xrayglasses.find(".fixed").each(function(){s(this).css({marginTop:"auto"==s(this).css("top")?"auto":a,marginLeft:"auto"==s(this).css("left")?"auto":e})})},keypress:function(a){if((a.keyCode||a.which)==xrayglasses.config.toggleKeyCode){var s="keydown"===a.type,e=xrayglasses.data.xrayglasses.css("opacity")<.5;s===e&&xrayglasses.data.xrayglasses.fadeTo(100,e?1:0)}}},e.defaults=e.prototype.defaults,s.fn.xrayglasses=function(a){return this.each(function(){new e(this,a).init()})},a.XRayGlasses=e}(window,jQuery);